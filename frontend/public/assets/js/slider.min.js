window.addEventListener('load',function () {
    // Enhanced Tab Switching with Smooth Animations
    const categoryTabs = document.querySelectorAll('.category-tab');
    const techMarquees = document.querySelectorAll('.tech-marquee');

    // Initialize intersection observer for performance
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '50px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.animationPlayState = 'running';
            } else {
                entry.target.style.animationPlayState = 'paused';
            }
        });
    }, observerOptions);

    // Observe all marquee tracks
    document.querySelectorAll('.marquee-track').forEach(track => {
        observer.observe(track);
    });

    // Enhanced tab interaction
    categoryTabs.forEach((tab, index) => {
        tab.addEventListener('mouseenter', function () {
            switchCategory(this.dataset.category);
        });

        tab.addEventListener('click', function (e) {
            e.preventDefault();
            switchCategory(this.dataset.category);
        });

        // Add keyboard navigation
        tab.addEventListener('keydown', function (e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                switchCategory(this.dataset.category);
            }
        });

        // Add focus management
        tab.setAttribute('tabindex', '0');
        tab.setAttribute('role', 'button');
        tab.setAttribute('aria-pressed', 'false');
    });

    function switchCategory(category) {
        // Remove active state from all tabs with smooth transition
        categoryTabs.forEach(tab => {
            tab.classList.remove('active');
            tab.setAttribute('aria-pressed', 'false');
            tab.style.transform = 'translateY(0)';
        });

        // Add active state to selected tab
        const activeTab = document.querySelector(`.category-tab[data-category="${category}"]`);
        if (activeTab) {
            activeTab.classList.add('active');
            activeTab.setAttribute('aria-pressed', 'true');
        }

        // Hide all marquees with fade out
        techMarquees.forEach(marquee => {
            marquee.style.opacity = '0';
            marquee.style.transform = 'translateY(20px)';

            setTimeout(() => {
                marquee.style.display = 'none';
                marquee.classList.remove('active');
            }, 200);
        });

        // Show target marquee with fade in
        const targetMarquee = document.querySelector(`.tech-marquee[data-category="${category}"]`);
        if (targetMarquee) {
            setTimeout(() => {
                targetMarquee.style.display = 'block';
                targetMarquee.classList.add('active');

                // Trigger reflow
                targetMarquee.offsetHeight;

                targetMarquee.style.opacity = '1';
                targetMarquee.style.transform = 'translateY(0)';
            }, 200);
        }
    }

    // Enhanced card interactions
    document.querySelectorAll('.tech-card').forEach(card => {
        card.addEventListener('mouseenter', function () {
            // Add subtle scale and glow effect
            this.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
        });

        card.addEventListener('mouseleave', function () {
            this.style.transform = '';
        });

        // Add click interaction for mobile
        card.addEventListener('click', function () {
            const techName = this.querySelector('.tech-name').textContent;

            // Create ripple effect
            const ripple = document.createElement('div');
            ripple.style.cssText = `
                        position: absolute;
                        border-radius: 50%;
                        background: rgba(255, 255, 255, 0.3);
                        transform: scale(0);
                        animation: ripple 0.6s linear;
                        pointer-events: none;
                        width: 100px;
                        height: 100px;
                        left: 50%;
                        top: 50%;
                        margin-left: -50px;
                        margin-top: -50px;
                    `;

            this.style.position = 'relative';
            this.appendChild(ripple);

            setTimeout(() => {
                ripple.remove();
            }, 600);
        });
    });

    // Add ripple animation keyframes
    const style = document.createElement('style');
    style.textContent = `
                @keyframes ripple {
                    to {
                        transform: scale(2);
                        opacity: 0;
                    }
                }
                
                @keyframes float {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-10px); }
                }
                
                .tech-card:hover {
                    animation: float 2s ease-in-out infinite;
                }
            `;
    document.head.appendChild(style);

    // Performance optimization: Reduce animation on low-end devices
    if (navigator.hardwareConcurrency <= 2) {
        document.querySelectorAll('.marquee-track').forEach(track => {
            track.style.animationDuration = '60s';
        });
    }

    // Add smooth scroll behavior for navigation
    if ('scrollBehavior' in document.documentElement.style) {
        document.documentElement.style.scrollBehavior = 'smooth';
    }

    
});

// Preload images for better performance
window.addEventListener('load', function () {
    const imageUrls = [
        'https://upload.wikimedia.org/wikipedia/commons/7/7e/Kotlin-logo.svg',
        'https://upload.wikimedia.org/wikipedia/commons/9/9a/Swift_logo.svg',
        'https://upload.wikimedia.org/wikipedia/commons/c/c3/Python-logo-notext.svg',
        'https://upload.wikimedia.org/wikipedia/commons/1/18/ISO_C%2B%2B_Logo.svg',
        'https://upload.wikimedia.org/wikipedia/commons/0/0d/C_Sharp_wordmark.svg',
        'https://upload.wikimedia.org/wikipedia/commons/6/61/HTML5_logo_and_wordmark.svg',
        'https://upload.wikimedia.org/wikipedia/commons/6/6a/JavaScript-logo.png'
    ];

    imageUrls.forEach(url => {
        const img = new Image();
        img.src = url;
    });
});